<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Flight Info</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3/dist/css/bootstrap.min.css" rel="stylesheet"> 

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto+Slab:wght@400;700&display=swap">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Pacifico&family=Playwrite+GB+S:ital,wght@0,100..400;1,100..400&display=swap">
    
    <link rel="stylesheet" href="addflightinfo.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Pacifico&family=Playwrite+GB+S:ital,wght@0,100..400;1,100..400&display=swap" rel="stylesheet">    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> 
    <link rel="stylesheet" href="navbar.css">

</head>
<body>
    <div id="navbar-app"> 
        <navbar-component></navbar-component> 
    </div> 

    <!-- Main Content -->
    <div id="app" class="container-fluid my-4">
        <div class="row justify-content-center">
            <!-- Input Form Section -->
            <div class="form-container col-10 col-lg-5 mx-4">
                <h3 class="title">‚úàÔ∏è Enter Flight Details</h3>
                
                <form>
                    <div class="mb-4">
                        <label for="from-city" class="form-label">Departure</label>
                        <input type="text" class="form-control" v-model="fromCity" placeholder="Enter City" required>
                    </div>
                    <div class="mb-4">
                        <label for="to-city" class="form-label">Arrival</label>
                        <input type="text" class="form-control" v-model="toCity" placeholder="Enter City" required>
                    </div>
                    <div class="mb-4">
                        <label for="departure-date" class="form-label">Departure Date</label>
                        <input type="date" class="form-control" v-model="departureDate" required>
                    </div>
                    <div class="mb-4">
                        <label for="departure-time" class="form-label">Departure Time</label>
                        <input type="time" class="form-control" v-model="departureTime" required>
                    </div>
                    <div class="mb-4">
                        <label for="flight-number" class="form-label">Flight Number</label>
                        <input type="text" class="form-control" v-model="flightNumber" placeholder="eg. SQ123" required>
                    </div>
                    <div class="mb-4">
                        <label for="seat-number" class="form-label">Seat Number (Optional)</label>
                        <input type="text" class="form-control" v-model="seatNumber" placeholder="Enter Seat Number">
                    </div>
                    <div class="mb-4">
                        <label for="flight-cost" class="form-label">Cost Of Flight ($)</label>
                        <input type="text" class="form-control" v-model="flightCost" placeholder="Enter Cost">
                    </div>
                    <button type="submit" class="btn btn-primary w-100" @click.prevent="addFlight">Confirm</button>
                </form>
            </div>
            
            <div class="form-container col-10 col-lg-5 mx-4">
                <h3 class="title">üõ´ Flights</h3>
                <div v-if="flights.length === 0" class="no-flights">No flights added.</div>
                
                <div class="row justify-content-center">
                    <div v-for="(flight, index) in flights" :key="index" class="ticket col-12 col-sm-6 col-lg-4 my-2">
                        <div class="ticket-header">
                            <div class="head-logo">Roameo</div>
                            <div class="head-flight">{{ flight.flightNumber || "Flight Number" }}</div>
                        </div>
                        <div class="ticket-body">
                            <div class="locations">
                                <div class="loc-depart">{{ flight.fromCity || "From" }}
                                    <h1>{{ flight.fromCity ? flight.fromCity.slice(0, 3).toUpperCase() : "---" }}</h1>
                                </div>
                                <div class="loc-direction">
                                    <img src="plane.png" class="loc-direction">
                                </div>
                                <div class="loc-arrive">{{ flight.toCity || "To" }}
                                    <h1>{{ flight.toCity ? flight.toCity.slice(0, 3).toUpperCase() : "---" }}</h1>
                                </div>
                            </div>
                            <div class="passenger-name"><h4>Passenger's Name</h4></div>
                            <div class="body-info">
                                <div class="flight-info">
                                    <div>Flight <h4>{{ flight.flightNumber || "-" }}</h4></div>
                                    <div>Seat <h4>{{ flight.seatNumber || "-" }}</h4></div>
                                </div>
                                <div class="flight">
                                    <div>Departure Time <h4>{{ flight.departureTime || "-" }}</h4></div>
                                    <div>Departure Date <h4>{{ flight.departureDate || "-" }}</h4></div>
                                </div>
                            </div>
                        </div>
                        <div class="ticket-bottom">
                            <div class="depart-barcode"></div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                            <button type="button" class="btn btn-primary w-100" v-if="flights.length > 0">Add Flights To Trip!</button>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    <footer>
        &copy; 2024 ROAMEO. All Rights Reserved.
    </footer>
    
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src = "navbarLoader.js"></script>
     
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    tripID: '',
                    fromCity: '',
                    toCity: '',
                    departureDate: '',
                    departureTime: '',
                    flightNumber: '',
                    seatNumber: '',
                    flightCost: '',
                    flights: [] 
                };
            },
            methods: {
                addFlight() {
                    
                    this.flights.push({
                        fromCity: this.fromCity,
                        toCity: this.toCity,
                        departureDate: this.departureDate,
                        departureTime: this.departureTime,
                        flightNumber: this.flightNumber,
                        seatNumber: this.seatNumber,
                        flightCost: this.flightCost
                    });

                    this.resetForm();
                },
                // async addAllFlightsToTrip() {
                //     try {
                //         // Pass all flights at once to Firebase under a single tripID
                //         await add_flights_to_trip(this.tripID, this.flights);
                //         this.flights = [];  // Clear the array after saving
                //         alert("All flights have been added to the trip successfully!");
                //         window.location.href = "mytripinfo.html";
                //     } catch (error) {
                //         console.error("Error adding flights to Firebase:", error);
                //     }
                // },
                resetForm() {
                    this.fromCity = '';
                    this.toCity = '';
                    this.departureDate = '';
                    this.departureTime = '';
                    this.flightNumber = '';
                    this.seatNumber = '';
                    this.flightCost = '';
                }
            }
        });

        app.mount('#app');
    </script>
    
    <!-- Bootstrap JS bundle to be placed before the closing </body> tag -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3/dist/js/bootstrap.bundle.min.js" ></script> 
    
</body>
</html>
